## TLS Encryption (requires cert files to be present on the server nodes)
# tls {
#   defaults {
#     ca_file   = "{{ consul_config_dir }}/certs/{{ consul_domain }}-agent-ca.pem"
#     cert_file = "{{ consul_config_dir }}/certs/{{consul_datacenter}}-server-{{ consul_domain }}-0.pem"
#     key_file  = "{{ consul_config_dir }}/certs/{{consul_datacenter}}-server-{{ consul_domain }}-0-key.pem"
#     verify_outgoing        = true
#     verify_incoming        = true
#   }
#   https {
#     verify_incoming        = false
#   }
#   internal_rpc {
#     verify_server_hostname = true
#   }
# }
## TLS Encryption (requires cert files to be present on the server nodes)
tls {
  defaults {
    ca_file                = "{{ consul_config_dir }}/certs/{{ consul_domain }}-agent-ca.pem"
    cert_file              = "{{ consul_config_dir }}/certs/{{consul_datacenter}}-server-{{ consul_domain }}-0.pem"
    key_file               = "{{ consul_config_dir }}/certs/{{consul_datacenter}}-server-{{ consul_domain }}-0-key.pem"
    verify_incoming        = false
    verify_outgoing        = true
  }
  internal_rpc {
    verify_server_hostname = true
  }
}

auto_encrypt {
  allow_tls = true
}